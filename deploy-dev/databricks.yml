bundle:
  name: energy_model
  
experimental:
  python_wheel_wrapper: true

include:
  - workflows/*.yml

targets:
  dev:
    mode: development
    default: true
    run_as:
      service_principal_name: 10971450-b399-4a24-bcbb-6c3d7300c858
    existing_cluster_id: 0716-155236-mvtlpqex
    git_source:
      git_url: https://github.com/CentricaGroupDataAI/energy-model-tests.git
      git_provider: gitHub
      git_branch: develop
    permissions:
      - group_name: ags-dap-u-deg-dev
        level: CAN_MANAGE
      - user_name: ram.krishna@centrica.com
        level: CAN_MANAGE
  staging:
    mode: production
    run_as: 
      service_principal_name: 69707254f-e89d-4c6b-81d9-d2b72a458827
    existing_cluster_id: 0716-092643-5iin5cl6
    git_source:
      git_url: https://github.com/CentricaGroupDataAI/energy-model-tests.git
      git_provider: gitHub
      git_branch: release
    permissions:
      - group_name: ags-dap-u-deg-stg
        level: CAN_MANAGE
      - user_name: ram.krishna@centrica.com
        level: CAN_MANAGE

# These are the variables that are common to all targets for DBT
variables:
  profiles_dir:
    description: The directory where the DBT profiles are stored
    default: ./.github/dbt_profiles

  catalog:
    description: The default catalog to use for DBT
    default: grp_dataeng_dbtdev

  dbt_runner:
    description: The runner to use for DBT
    lookup:
      cluster: grp-dataeng-dev

  max_concurrent_runs:
    description: The common max_concurrent_runs for all jobs
    default: 1